!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){{var c="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},d="undefined"!=typeof window?window.angular:"undefined"!=typeof c?c.angular:null;"undefined"!=typeof window?window.angular:"undefined"!=typeof c?c.angular:null}b.exports={"content-editable":d.module("content-editable",["ngSanitize"]).directive("contenteditable",a("./modules/content-editable/contentEditable/directive.js")),"drag-and-drop":d.module("drag-and-drop",[]).directive("dropArea",a("./modules/drag-and-drop/dropArea/directive")),"event-listeners":d.module("event-listeners",[]).factory("on",a("./modules/event-listeners/on/factory")).factory("off",a("./modules/event-listeners/off/factory")),inputs:d.module("inputs",[]).directive("number",a("./modules/inputs/number/directive")),"video-editor":d.module("video-editor",["content-editable","drag-and-drop","event-listeners","inputs"]).directive("audioPanel",a("./modules/video-editor/audioPanel/directive")).directive("editor",a("./modules/video-editor/editor/directive")).directive("filtersPanel",a("./modules/video-editor/filtersPanel/directive")).directive("playbackSurface",a("./modules/video-editor/playbackSurface/directive")).directive("positionBar",a("./modules/video-editor/positionBar/directive")).directive("teaser",a("./modules/video-editor/teaser/directive")).directive("timeline",a("./modules/video-editor/timeline/directive")).directive("transformsPanel",a("./modules/video-editor/transformsPanel/directive"))}},{"./modules/content-editable/contentEditable/directive.js":2,"./modules/drag-and-drop/dropArea/directive":3,"./modules/event-listeners/off/factory":4,"./modules/event-listeners/on/factory":5,"./modules/inputs/number/directive":6,"./modules/video-editor/audioPanel/directive":8,"./modules/video-editor/editor/directive":10,"./modules/video-editor/filtersPanel/directive":12,"./modules/video-editor/playbackSurface/directive":14,"./modules/video-editor/positionBar/directive":16,"./modules/video-editor/teaser/directive":18,"./modules/video-editor/timeline/directive":20,"./modules/video-editor/transformsPanel/directive":22}],2:[function(a,b){"use strict";function c(a,b){var c=b;try{c=a()}catch(d){c=b}return c}b.exports=["$sce","$window",function(a,b){return{restrict:"A",require:"?ngModel",link:function(d,e,f,g){function h(){var a=e.html(),b=g.$viewValue;f.stripBr&&"<br>"===a&&(a=""),g.$setViewValue(a),g.$valid||g.$setViewValue(b),g.$render()}function i(a){return a=parseInt(a,10),isNaN(a)?l["default"]:a}function j(a){return a=parseFloat(a),isNaN(a)?l["default"]:a}function k(){if(document.selection){var a=document.body.createTextRange();a.moveToElementText(e[0]),a.select()}else if(b.getSelection){var c=b.getSelection(),a=document.createRange();a.selectNodeContents(e[0]),c.removeAllRanges(),c.addRange(a)}}if(g){var l=c(function(){return d.$eval(f.editableType)},{});l&&("int"===l.type?(g.$parsers.unshift(i),g.$validators.number=function(a){return"number"==typeof a}):"number"===l.type&&(g.$parsers.unshift(j),g.$validators.number=function(a){return"number"==typeof a})),e.on("focus",k),e.on("blur change",function(){d.$evalAsync(h)}),g.$render=function(){e.html(a.getTrustedHtml(g.$viewValue))},h()}}}}]},{}],3:[function(a,b){"use strict";b.exports=["$parse",function(a){function b(a){a.preventDefault(),a.stopPropagation()}return{restrict:"A",link:function(c,d,e){d.bind("dragover",b),d.bind("dragenter",b),d.bind("drop",function(b){return b.preventDefault(),a(e.dropArea)(c,{$files:b.dataTransfer.files,$items:b.dataTransfer.items}),c.$apply(),!1})}}}]},{}],4:[function(a,b){"use strict";b.exports=function(){return function(a,b){for(var c in b)a.removeEventListener(c,b[c])}}},{}],5:[function(a,b){"use strict";b.exports=function(){return function(a,b){for(var c in b)a.addEventListener(c,b[c])}}},{}],6:[function(a,b){"use strict";b.exports=function(){return{restrict:"AE",template:a("./template.html"),scope:{ngModel:"=",min:"=",max:"="}}}},{"./template.html":7}],7:[function(a,b){b.exports='<div class="buttons">\n  <div class="up" ng-click="increment()">^</div>\n  <div class="down" ng-click="decrement()">v</div>\n</div>\n<input type="number" ng-model="ngModel" min="min" max="max">'},{}],8:[function(a,b){"use strict";var c=window.AudioContext||window.webkitAudioContext,d=window.requestAnimationFrame;b.exports=function(){return{restrict:"E",template:a("./template.html"),link:function(a,b){var e=b.find("canvas")[0],f=e.getContext("2d"),g=e.width,h=e.height,i=new c,j=void 0;a.$watch("videoEl",function(b){function c(){function a(){j.paused||d(a),l.getByteTimeDomainData(c),f.clearRect(0,0,g,h),f.lineWidth=1,f.strokeStyle="rgb(0, 0, 0)",f.beginPath(),f.moveTo(0,c[0]/128*h/2);for(var i=g/b,k=i,m=1;b>m;m++){var n=c[m]/128,o=n*h/2;f.lineTo(k,o),k+=i}f.lineTo(e.width,e.height/2),f.stroke()}l.fftSize=2048;var b=l.fftSize,c=new Uint8Array(b);f.clearRect(0,0,g,h),d(a)}j=b;var k=a.createMediaElementSource(i),l=i.createAnalyser();k.connect(l),l.connect(i.destination),j.addEventListener("play",c)})}}}},{"./template.html":9}],9:[function(a,b){b.exports="<canvas></canvas>"},{}],10:[function(a,b){"use strict";b.exports=["$sce",function(b){return{restrict:"E",template:a("./template.html"),controller:["$scope",function(a){a.video={src:void 0},a.receivedPaste=function(a){console.log(a,a.clipboardData.getData("text/plain"))},a.droppedFiles=function(c){var d=c[0];if(d){var e=d.type;0===e.indexOf("video")&&(a.video.src=b.trustAsResourceUrl(URL.createObjectURL(d)),a.video.loaded=!1)}}}]}}]},{"./template.html":11}],11:[function(a,b){b.exports='<div ng-if="video.src != null"\n     ng-show="video.success"\n     class="has-video">\n  <div class="divider">\n    <playback-surface></playback-surface>\n    <filters-panel ng-hide="hideFilters"></filters-panel>\n  </div>\n  <position-bar></position-bar>\n  <timeline ng-hide="hideTimeline"></timeline>\n</div>\n<div ng-if="video.error != null" class="video-error">\n  Sorry, your browser doesn\'t support that video!\n  {{videoError}}\n</div>\n<teaser ng-if="video.src == null" ng-click="teaserClicked()"></teaser>'},{}],12:[function(a,b){function c(a,b,c){return b=void 0===b?Number.NEGATIVE_INFINITY:b,c=void 0===c?Number.POSITIVE_INFINITY:c,Math.min(Math.max(b,a),c)}var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e=function(a,b){if(Array.isArray(a))return a;for(var c,d=[],e=a[Symbol.iterator]();!(c=e.next()).done&&(d.push(c.value),!b||d.length!==b););return d},f="undefined"!=typeof window?window._:"undefined"!=typeof d?d._:null;b.exports=function(){return{restrict:"E",template:a("./template.html"),link:function(a,b){var d=b.find("table"),g=d.find("tbody");a.$watchCollection("filters",function(a){function b(a,b){a.stopPropagation(),a.preventDefault();var d=a.deltaY,e=b.value,f=b.min,g=b.max;0>d?b.value=c(e+1,f,g):d>0&&(b.value=c(e-1,f,g))}var d=g.children();f.each(f.zip([d,a]),function(a){var c=e(a,2),d=c[0],f=c[1];d.addEventListener("wheel",function(a){return h(b(a,f))})})});var h=f.debounce(function(b){return a.$apply(b)},10)},controller:["$scope",function(a){function b(){var b=c();d.style["-webkit-filter"]=a.videoElFilterStyle=b,d.style.filter=a.videoElFilterStyle=b}function c(){return f.map(g,function(a){var b=a.name,c=a.value,d=a.unit;return void 0!=c?b+"("+c+d+")":""}).join(" ")}var d=void 0;f.each(g,function(a){a.defaultValue=a.value}),a.filters=g,a.$watch("videoEl",function(a){d=a,b()}),a.reset=function(){f.each(a.filters,function(a){a.value=a.defaultValue})},a.$watch("filters",function(){return b()},!0)}]}};var g=[{name:"contrast",value:100,unit:"%",min:0},{name:"brightness",value:100,unit:"%",min:0},{name:"saturate",value:100,unit:"%",min:0},{name:"opacity",value:100,unit:"%",min:0,max:100},{name:"hue-rotate",value:0,unit:"deg"},{name:"grayscale",value:0,unit:"%",min:0,max:100},{name:"sepia",value:0,unit:"%",min:0},{name:"invert",value:0,unit:"%",min:0,max:100},{name:"blur",value:0,unit:"px",min:0},{name:"drop-shadow"}]},{"./template.html":13}],13:[function(a,b){b.exports='<div class="container">\n  <div class="header" ng-click="hideFilters = !hideFilters">Filters</div>\n  <table>\n    <tr ng-repeat="filter in filters" class="row">\n      <td class="name">{{filter.name}}</td>\n      <td class="value"><input type="number" ng-model="filter.value" min="{{filter.min}}" max="{{filter.max}}"></td>\n      <td class="unit">{{filter.unit}}</td>\n    </tr>\n  </table>\n  <div class="reset" ng-click="reset()">Reset Filters</div>\n</div>'},{}],14:[function(a,b){"use strict";function c(a,b,c){return Math.min(b,Math.max(c,a))}var d={playbackSpeed:function(){var a=100,b=1e-7,d=(new Date).getTime();return function(e,f,g){var h=(new Date).getTime(),i=h-d,j=f.playbackRate||b,k=0;g.deltaY>0?k=-.001*(1e3/c(i,1e3,0))*j:g.deltaY<0&&(k=.001*(1e3/c(i,1e3,0))*j),0!==k&&!function(){var d=j+k;e.$apply(function(){return e.setPlaybackRate(c(d,a,b))})}(),d=h}}(),zoom:function(){var a=(new Date).getTime();return function(b,d,e){var f=(new Date).getTime(),g=f-a,h=d.playbackRate||minPlaybackRate,i=0;e.deltaY>0?i=-.001*(1e3/c(g,1e3,0))*h:e.deltaY<0&&(i=.001*(1e3/c(g,1e3,0))*h),0!==i&&!function(){var a=h+i;b.$apply(function(){return b.setPlaybackRate(c(a,maxPlaybackRate,minPlaybackRate))})}(),a=f}}()};b.exports=[function(){return{restrict:"E",template:a("./template.html"),link:function(a,b){function c(b){console.log("loadeddata",b),a.$apply(function(){a.video.loaded=!0})}function e(a){console.log("loadedmetadata",a)}function f(){a.$apply(function(){a.video.success=!0,a.setPlaybackRate(1)})}function g(){a.$apply(function(){a.video.src=void 0,a.video.success=!1,a.video.error=i.error,a.video.loaded=!1,a.haveVideo=!1,console.log(a)}),console.log("error",arguments)}function h(b){d[k](a,i,b)}{var i=b.find("video")[0],j=b.find("div")[0],k="playbackSpeed";angular.element(i),angular.element(j)}a.videoEl=i,i.addEventListener("loadeddata",c),i.addEventListener("loadedmetadata",e),i.addEventListener("loadstart",f),i.addEventListener("error",g),j.addEventListener("wheel",h),a.togglePlay=function(){i.paused?i.play():i.pause()},a.setCurrentTime=function(a){i.duration>0&&(i.currentTime=a)},a.incrementCurrentTime=function(a){i.duration>0&&(i.currentTime+=a)},a.setPlaybackRate=function(b){void 0===b&&(b=1),i.playbackRate=b,b=b.toFixed(5e-4>b?7:.005>b?6:.05>b?5:.5>b?4:3),a.playbackRate=b},a.createMediaElementSource=function(a){return a.createMediaElementSource(i)},a.setPlaybackRate(i.playbackRate)},controller:["$scope",function(a){a.showFilters=!0}]}}]},{"./template.html":15}],15:[function(a,b){b.exports='<div ng-if="video.loaded != true" class="loading">Loading video...</div>\n<video\n      ng-show="video.src != null && video.loaded"\n      ng-src="{{video.src}}"></video>\n<div\n    class="overlay"\n    ng-click="togglePlay()">\n  <audio-panel></audio-panel>\n  <transforms-panel ng-click="$event.stopPropagation()"></transforms-panel>\n  <div class="playback-rate">\n    <span class="rate">{{playbackRate}}</span>\n    <span class="x" ng-click="setPlaybackRate(1); $event.stopPropagation()">X</span>\n  </div>\n</div>\n'},{}],16:[function(a,b){function c(a){var b=a,c=Math.floor(b/3600),d=Math.floor((b-60*c*60)/60),e=Math.floor(b%60),f=Math.floor(10*b%10);return(c>0?c+"h":"")+(10>d?"0"+d:d)+"'"+(10>e?"0"+e:e)+"''"+f}function d(a,b,c){return b=void 0===b?Number.NEGATIVE_INFINITY:b,c=void 0===c?Number.POSITIVE_INFINITY:c,Math.min(Math.max(b,a),c)}{var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};"undefined"!=typeof window?window._:"undefined"!=typeof e?e._:null}b.exports=["on",function(b){return{restrict:"E",template:a("./template.html"),link:function(a,c){function d(a){0===a.button&&(l=!0,i(a))}function e(a){0===a.button&&(l=!1)}function f(a){l&&i(a)}function g(){l=!1}function h(b){var c=a.videoEl,d=b.deltaY,e=a.swapDirection>0?-1:1,f=(new Date).getTime(),g=f-m,h=0;d>0?h=-.1*(1e3/g):0>d&&(h=.1*(1e3/g)),m=f,a.incrementCurrentTime(e*h),a.updateBar(c.currentTime)}function i(b){var c=a.videoEl,d=b.clientX/(k.clientLeft+k.clientWidth);j(d*c.duration)}function j(b){a.setCurrentTime(b),a.updateBar(b)}var k=c[0];a.$watch("pinned",function(a){a?c.addClass("pinned"):c.removeClass("pinned")}),b(k,{mousedown:d,mouseup:e,mousemove:f,wheel:h}),b(window,{mouseout:g});var l=!1,m=(new Date).getTime()},controller:["$scope",function(a){var b=a.videoEl,e=void 0;a.updateBar=function(f){f!==e&&(e=f,a.$apply(function(){var e=b.currentTime,f=b.duration,g=a.thumbnails,h=g[0],i=g[g.length-1];a.currentTime=c(e),a.remainingTime=c(f-e),a.currentPercent=100*(e/f),a.timelineWidth=d(100*(i.time-h.time)/f,0,100),a.timelineLeft=d(100*(e+h.offset)/f,0,100)}))},b.addEventListener("timeupdate",function(){return a.updateBar(b.currentTime)}),b.addEventListener("loadeddata",function(){return a.updateBar(b.currentTime)})}]}}]},{"./template.html":17}],17:[function(a,b){b.exports='<div class="surface-overlay"></div>\n<div class="commands">\n  <div class="pin" ng-click="pinned = !pinned; $event.stopPropagation()">{{pinned ? \'pinned\' : \'pin\'}}</div>\n  <div class="swap-direction" ng-click="swapDirection = !swapDirection; $event.stopPropagation()">swap direction</div>\n</div>\n<div class="bar" style="width:{{currentPercent}}%;">\n  <span class="time current-time">{{currentTime}}</span>\n  <span class="time remaining-time">{{remainingTime}}</span>\n</div>\n<div ng-hide="hideTimeline" class="timeline-extent" style="width:{{timelineWidth}}%;left:{{timelineLeft}}%"></div>'},{}],18:[function(a,b){"use strict";b.exports=function(){return{restrict:"E",template:a("./template.html"),controller:["$scope",function(a){function b(){return c||(c=document.createElement("input"),c.type="file",c.multiple=!0,angular.element(c).bind("change",function(b){a.$apply(function(){a.droppedFiles(b.target.files)})})),c}a.teaserClicked=function(){a.promptForFile()},a.promptForFile=function(){var a=b();a.click()};var c=void 0}]}}},{"./template.html":19}],19:[function(a,b){b.exports='<div class="container">\n  <span class="drop">Drop A File, yo!</span>\n  <span class="click">Or, Click!</span>\n  <span class="paste">Or, Paste!</span>\n  <span class="anywhere">[anywhere]</span>\n</div>'},{}],20:[function(a,b){function c(a,b,c){return b=void 0===b?Number.NEGATIVE_INFINITY:b,c=void 0===c?Number.POSITIVE_INFINITY:c,Math.min(Math.max(b,a),c)}var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e="undefined"!=typeof window?window._:"undefined"!=typeof d?d._:null;b.exports=["on","off",function(b,d){return{restrict:"E",template:a("./template.html"),link:function(a,f){function g(b){var d=j.currentTime,f=j.duration,g=b.deltaY,h=a.thumbnails,i=h[0],l=h[h.length-1];a.$apply(function(){g>0?e.each(h,function(a){a.offset*=2}):0>g&&e.each(h,function(a){a.offset/=2}),k(d),a.timelineWidth=c(100*(l.time-i.time)/f,0,100),a.timelineLeft=c(100*(d+i.offset)/f,0,100)})}var h=f[0],i=f.find("video")[0],j=void 0;b(h,{wheel:g}),a.$watchCollection("thumbnails",function(){var b=a.thumbnails,c=f.find("canvas"),d=b.length%2===0?1:0;e.each(e.zip([b,c]),function(c,e){var f=c[0],g=c[1],h=g.getContext("2d");g.width=g.parentNode.clientWidth,g.height=9*g.width/16,g.style["-webkit-filter"]=a.videoElFilterStyle,f.canvas=g,f.context=h,f.index=e,f.offset=2*(e-Math.floor(b.length/2))+d}),j&&k(j.currentTime)}),a.$watch("videoEl",function(a,c){function e(){k(j.currentTime)}function f(){j.paused&&k(j.currentTime)}function g(){k(j.currentTime)}j=a,console.dir(j),c&&d(c,{pause:e,timeupdate:f,loadeddata:g}),b(j,{pause:e,timeupdate:f,loadeddata:g})}),a.$watch("videoElFilterStyle",function(b){a.thumbnails&&e.each(a.thumbnails,function(a){a.canvas.style["-webkit-filter"]=b,a.canvas.style.filter=b})}),a.gotoThumbnail=function(a){j.currentTime=a.time},a.offsetChanged=function(){k(j.currentTime)};var k=function(b,c){function d(){var d=c[f],e=d.canvas,g=d.context,h=b.videoWidth,i=b.videoHeight,j=h/i;if(j>1?(e.width=e.parentNode.clientWidth,e.height=e.width/j):(e.height=e.parentNode.clientHeight,e.width=e.height*j),d.time>b.duration?g.clearRect(0,0,e.width,e.height):g.drawImage(b,0,0,e.width,e.height),d.pending=!1,f++,f<c.length){var k=c[f];b.currentTime=k.time}a.$apply()}var f=0;return b.addEventListener("seeked",d),function(c){var d=a.thumbnails;f=0,e.each(d,function(a){a.time=c+a.offset,a.pending=!0});for(var g=0;g<d.length;g++){var h=d[g];if(h.time>=0)break;h.context.clearRect(0,0,h.canvas.width,h.canvas.height)}f=g,f<d.length&&(b.currentTime=d[f].time)}}(i,a.thumbnails)},controller:["$scope",function(a){a.thumbnails=[{},{},{},{},{},{}],a.insertThumbnail=function(b){a.thumbnails.splice(b,0,{})},a.removeThumbnail=function(b){a.thumbnails.splice(b,1)}}]}}]},{"./template.html":21}],21:[function(a,b){b.exports='<video ng-src="{{video.src}}" class="thumbnail-video"></video>\n<div ng-repeat="thumbnail in thumbnails track by $index"\n     ng-class="{\n                thumbnail: true,\n                pending: thumbnail.pending,\n                \'zero\': thumbnail.offset == 0,\n                positive: !(thumbnail.offset <= 0)\n               }">\n  <canvas width="0" height="0"></canvas>\n  <div class="overlay" ng-click="gotoThumbnail(thumbnail)" title="Jump {{thumbnail.offset}}s">\n    <div class="remove-thumbnail" ng-click="removeThumbnail($index)" title="Remove Thumbnail">-</div>\n    <div class="add-thumbnail" ng-click="insertThumbnail($index)" title="Add Thumbnail">+</div>\n    <div class="time-offset" contenteditable editable-type="{type: \'int\', defualt: 0}" ng-model="thumbnail.offset" title="Edit Offset" ng-change="offsetChanged(thumbnail)"></div>\n  </div>\n</div>\n<div class="hide-timeline" ng-click="hideTimeline = !hideTimeline">Hide Timeline</div>'},{}],22:[function(a,b){"use strict";b.exports=function(){return{restrict:"E",template:a("./template.html"),link:function(){},controller:["$scope",function(a){function b(){var a=c();e.style.transform=a,e.style["-webkit-transform"]=a,e.style["-moz-transform"]=a,e.style["-ms-transform"]=a}function c(){return _.map(d,function(a,b){var c=a.value,d=a.unit;return void 0!=c?b+"("+c+d+")":""}).join(" ")}var d={},e=void 0;a.$watch("videoEl",function(a){e=a,b()}),a.panUp=function(){var a=d.translateY=d.translateY||{value:0,unit:"px"};a.value-=1,b()},a.panDown=function(){var a=d.translateY=d.translateY||{value:0,unit:"px"};a.value+=1,b()},a.panLeft=function(){var a=d.translateX=d.translateX||{value:0,unit:"px"};a.value-=1,b()},a.panRight=function(){var a=d.translateX=d.translateX||{value:0,unit:"px"};a.value+=1,b()},a.zoomIn=function(){var a=d.translateZ=d.translateZ||{value:0,unit:"px"};a.value-=1,b()},a.zoomOut=function(){var a=d.translateZ=d.translateZ||{value:0,unit:"px"};a.value-=1,b()}}]}}},{"./template.html":23}],23:[function(a,b){b.exports='<div class="up" ng-click="panUp()">&#8679</div>\n<div class="row">\n  <div class="left" ng-click="panLeft()">&#8678;</div>\n  <div class="right" ng-click="panRight()">&#8680</div>\n</div>\n<div class="down" ng-click="panDown()">&#8681</div>\n\n<div class="in" ng-click="zoomIn()" ng-wheel="zoomIn()">+</div>\n<div class="out" ng-click="zoomOut()">-</div>'},{}]},{},[1]);